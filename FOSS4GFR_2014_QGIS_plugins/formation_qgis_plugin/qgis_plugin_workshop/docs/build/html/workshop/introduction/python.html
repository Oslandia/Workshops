
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Python &mdash; QGIS Workshop v1.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/linfiniti.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="QGIS Workshop v1.0.0 documentation" href="../../index.html" />
    <link rel="up" title="Introduction - Outils" href="index.html" />
    <link rel="next" title="QT" href="qt.html" />
    <link rel="prev" title="QGIS" href="qgis.html" /> 
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="span3">
      <div class="well sidebar-nav">
          <a class="brand" href="http://qgis.org">
          <br />
          <center>QGIS Workshop</center></a>
            <h4>Contents</h4>
            <hr />
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Tutoriel</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="qgis.html"
                        title="previous chapter">QGIS</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="qt.html"
                        title="next chapter">QT</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/workshop/introduction/python.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
            
            
            
          <a rel="license"
            href="http://creativecommons.org/licenses/by-sa/3.0/"><img
            alt="Creative Commons License" style="border-width:0"
            src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a><br
          /><span xmlns:dct="http://purl.org/dc/terms/"
            property="dct:title">Linfiniti Sphinx Theme</span> by <a
            xmlns:cc="http://creativecommons.org/ns#"
            href="http://linfiniti.com" property="cc:attributionName"
            rel="cc:attributionURL">Linfiniti Consulting CC.</a> is licensed
          under a <a rel="license"
            href="http://creativecommons.org/licenses/by-sa/3.0/">Creative
            Commons Attribution-ShareAlike 3.0 Unported License</a>.<br />Based
          on a work at <a xmlns:dct="http://purl.org/dc/terms/"
            href="https://github.com/timlinux/linfiniti-sphinx-theme"
            rel="dct:source">github.com</a>.
      </div>
        </div><!-- span9 -->
        <div class="span9">
              
  <div class="section" id="python">
<h1>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>Python ?<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Python est un langage de programmation fun et puissant utilisé dans les applications web et les logiciels bureautiques. Il peut aussi être utilisé au travers des interfaces aux bibliothèques de l&#8217;OSGeo telles que GDAL/OGR, JTS et GEOS. Ses principales caractéristiques sont :</p>
<blockquote>
<ul class="simple">
<li>une syntaxe très claire et lisible</li>
<li>une approche objet intuitive</li>
<li>une gestion des erreurs basée sur les exceptions</li>
<li>des types de données dynamiques de très haut niveau</li>
<li>une implémentation dans de multiples langages (le cœur de Python est en C/C++ mais il existe aussi des implémentations Java (Jython), .Net (IronPython))</li>
</ul>
</blockquote>
</div>
<div class="section" id="importance-et-popularite">
<h2>Importance et popularité<a class="headerlink" href="#importance-et-popularite" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>Pour nos besoins, Python peut être utilisé pour accéder à  <strong>des tonnes</strong> de bibliothèques et logiciels de l&#8217;OSGeo. On utilise alors Python pour écrire des flux de programmations. Quelques un des logiciels de l&#8217;OSGeo incluent (non exhaustif):</dt>
<dd><ul class="first last simple">
<li>QGIS (ou vous ne liriez pas ceci)</li>
<li>PostGIS</li>
<li>GDAL/OGR</li>
<li>GEOS</li>
<li>JTS</li>
<li>GeoTools</li>
<li>Proj4</li>
<li>Mapserver</li>
<li>gvSIG</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Python est nommé d&#8217;après “Monty Python’s Flying Circus”</p>
</li>
<li><p class="first">Python est simple à apprendre et est très puissant</p>
</li>
</ul>
</div>
<div class="section" id="exemples">
<h2>Exemples<a class="headerlink" href="#exemples" title="Permalink to this headline">¶</a></h2>
<p>Tous les exemples suivants sont executés dans l&#8217;interpréteur Python. Sur l&#8217;installation Virtual Box vous pouvez accéder à l&#8217;interpréteur Python de deux façons &#8211; 1. Par QGIS et 2. Par le shell bash.</p>
<blockquote>
<ol class="arabic simple">
<li>La console Python de QGIS peut être démarrée en allant dans le menu fichier de QGIS et en cliquant sur <tt class="docutils literal"><span class="pre">Extensions</span> <span class="pre">--&gt;</span> <span class="pre">Console</span> <span class="pre">Python</span></tt> </li>
<li>Le shell bash peut être démarré en appuyant sur les touches  <tt class="docutils literal"><span class="pre">&lt;Cntl&gt;-&lt;ALT&gt;</span></tt> et en pressant  <tt class="docutils literal"><span class="pre">t</span></tt> en même temps. Une fois qu&#8217;un nouveau shell bash est ouvert vous avez juste à taper  <tt class="docutils literal"><span class="pre">python</span></tt> sur la ligne de commande et le shell devient magiquement un interpréteur Python.</li>
</ol>
</blockquote>
<p>Avec Python il est facile d&#8217;avoir de l&#8217;aide sur les fonctions et objets. Si une commande particulière vous pose problème, vous pouvez utiliser la commande help pour avoir sa signification (si elle en a une):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span>
<span class="go">Help on built-in function range in module __builtin__:</span>

<span class="go">range(...)</span>
<span class="go">    range([start,] stop[, step]) -&gt; list of integers</span>

<span class="go">    Return a list containing an arithmetic progression of integers.</span>
<span class="go">    range(i, j) returns [i, i+1, i+2, ..., j-1]; start (!) defaults to 0.</span>
<span class="go">    When step is given, it specifies the increment (or decrement).</span>
<span class="go">    For example, range(4) returns [0, 1, 2, 3].  The end point is omitted!</span>
<span class="go">    These are exactly the valid indices for a list of 4 elements.</span>
</pre></div>
</div>
<p>Strings, numbers, lists... beaucoup de mots clefs ! Le type Liste est le plus beau des types de données Python que vous devriez connaître. On peut utiliser des List pour stocker à peu près tout. Souvent les enregistrements d&#8217;une base de données sont représentés comme des List en Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># creer une liste</span>
<span class="gp">... </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">123</span><span class="p">,</span> <span class="mi">1234</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># remplacer des elements:</span>
<span class="gp">... </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">[1, 12, 123, 1234]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># en enlever:</span>
<span class="gp">... </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">[123, 1234]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># en ajouter:</span>
<span class="gp">... </span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;bletch&#39;</span><span class="p">,</span> <span class="s">&#39;xyzzy&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">[123, &#39;bletch&#39;, &#39;xyzzy&#39;, 1234]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># inserer une copie de la liste elle meme en debut</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[:</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">[123, &#39;bletch&#39;, &#39;xyzzy&#39;, 1234, 123, &#39;bletch&#39;, &#39;xyzzy&#39;, 1234]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># vider la liste : la remplacer par une liste vide</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>Un exemple d&#8217;utilisation de liste pour boucler sur les données et interpréter des chaines:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Boucle for classique</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span> <span class="k">print</span> <span class="n">i</span>
<span class="gp">...</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
<span class="go">5</span>
<span class="go">6</span>
<span class="go">7</span>
<span class="go">8</span>
<span class="go">9</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># structure de boucle plus interessante</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mess</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;I love maps and I cannot lie&quot;</span><span class="p">,</span><span class="s">&quot; &quot;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mess</span>
<span class="go">[&#39;I&#39;, &#39;love&#39;, &#39;maps&#39;, &#39;and&#39;, &#39;I&#39;, &#39;cannot&#39;, &#39;lie&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">really_messy</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="s">&quot;I love maps and I cannot lie&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">really_messy</span>
<span class="go">[&#39;I&#39;, &#39; &#39;, &#39;l&#39;, &#39;o&#39;, &#39;v&#39;, &#39;e&#39;, &#39; &#39;, &#39;m&#39;, &#39;a&#39;, &#39;p&#39;, &#39;s&#39;, &#39; &#39;, &#39;a&#39;, &#39;n&#39;, &#39;d&#39;, &#39; &#39;, &#39;I&#39;, &#39; &#39;, &#39;c&#39;, &#39;a&#39;, &#39;n&#39;, &#39;n&#39;, &#39;o&#39;, &#39;t&#39;, &#39; &#39;, &#39;l&#39;, &#39;i&#39;, &#39;e&#39;]</span>
</pre></div>
</div>
<p>Voici un exemple d&#8217;utilisation réelle. Construisons les paramètres d&#8217;une base de données, qu&#8217;on veut passer à une fonction. Dans cet exemple le premier code qui s&#8217;exécute est  <tt class="docutils literal"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">&quot;__main__&quot;:</span></tt> . Sur les systèmes Linux (e.g. Ubuntu) on peut exécuter ce script sans ouvrir l&#8217;interpréteur Python (Yeah!). Copier le code ci-dessous dans un fichier texte et le sauver sous  <tt class="docutils literal"><span class="pre">test.py</span></tt> dans un répertoire. Ensuite ouvrir un shell bash et <tt class="docutils literal"><span class="pre">cd</span></tt> dans ce répertoire. Taper sur la ligne de commande : <tt class="docutils literal"><span class="pre">python</span> <span class="pre">test.py</span></tt> . Votre script va s&#8217;exécuter et retourner la chaine suivante : <tt class="docutils literal"><span class="pre">pwd=secret;database=qgis;uid=sa;server=localhost</span></tt>. Allez y:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">buildConnectionString</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Build a connection string from a dictionary of parameters.</span>

<span class="sd">    Returns string.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s">&quot;;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">=</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">myParams</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;server&quot;</span><span class="p">:</span><span class="s">&quot;localhost&quot;</span><span class="p">,</span> \
                    <span class="s">&quot;database&quot;</span><span class="p">:</span><span class="s">&quot;qgis&quot;</span><span class="p">,</span> \
                    <span class="s">&quot;uid&quot;</span><span class="p">:</span><span class="s">&quot;sa&quot;</span><span class="p">,</span> \
                    <span class="s">&quot;pwd&quot;</span><span class="p">:</span><span class="s">&quot;secret&quot;</span> \
                    <span class="p">}</span>
    <span class="k">print</span> <span class="n">buildConnectionString</span><span class="p">(</span><span class="n">myParams</span><span class="p">)</span>
</pre></div>
</div>
<p>Quelques ressources supplémentaires pour se lancer sur la piste des Ninjas du Python:</p>
<blockquote>
<p><a class="reference external" href="http://diveintopython.org/toc/index.html">Dive into Python</a></p>
<p><a class="reference external" href="http://greenteapress.com/thinkpython/html/index.html">How to Think Like a Computer Scientist</a></p>
<p><a class="reference external" href="http://docs.python.org/tutorial/">The Python Tutorial</a> &#8211; le tutoriel officiel</p>
</blockquote>
</div>
</div>


        </div><!-- span9 -->
      </div><!-- row -->
    </div> <!-- container -->
    <div class="alert alert-info">
          &copy; Copyright 2011, Greg Corradini and Aaron Racicot.
    </div>
  </body>
</html>